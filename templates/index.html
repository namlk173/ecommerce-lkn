<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" 
    integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" 
    crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


    <title>Nhóm 15</title>
    <style>
        *{  margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-size: 1rem;
        }
        a{
            text-decoration: none !important;
            cursor: pointer;
        }
        html{
            background-color: #f5f5fa;
        }
        .navbar-position{
            margin-bottom: 5.24rem;
        }
        .navbar-fixed{
            background-color: #1a94ff;
            height: 100px;
        }
        .font-color1{
            color: #ffffff;
        }
        .font-color2{
            color: rgb(56, 56, 61);
            z-index: 1000;
        }
        .search-2{
            /* background-color: rgb(13 92 182); */
            color: #ffffff;
            min-width: 120px;
            min-height: 40px;
            border: none;
            border-radius: 2px;
            padding: 5px 12px;
        }
        .search-1{
            color: #78788e;
            min-width: 630px;
            min-height: 40px;
            border-radius: 2px;
            border: none;
            padding: 5px 12px;
        }
        .logo{
            max-width: 4rem;
        }
        .topic-item{
            min-height: 2rem;
            background-color: #ffffff;
        }
        .product:hover{
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        }
        .gradient-custom {
            /* fallback for old browsers */
            background: #6a11cb;
        
            /* Chrome 10-25, Safari 5.1-6 */
            background: -webkit-linear-gradient(to right, rgba(106, 17, 203, 1), rgba(37, 117, 252, 1));
        
            /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
            background: linear-gradient(to right, rgba(106, 17, 203, 1), rgba(37, 117, 252, 1))
        }
        textarea {
            max-height: 2rem;
            padding-left: 0.5rem;
        }
        .form-register{
            max-width: 60vh;
            margin-top: 5px;
            margin-bottom: 2px;
        }
        input{
            padding-left: 0.5rem;
        }
        .fs-08{
            font-size: 0.8rem;
        }
        .fs-12{
            font-size: 1.2rem;
        }
        .price-place{
            padding: 1rem;
        }
        .price-product{
            font-size: 2rem;
            color: #ff424e;
            font-weight: 700;
        }
        .btn-quantity{
            height: 30px;
            width: 30px;
            background-color: #ffffff;
            border: 1px solid #ccc;
            cursor: pointer;
            text-align: center;
            align-items: center;
        }
        .btn-quantity:hover{
            background-color: #fafafa;
        }
        .btn-quantity-left{
            border-right: none;
            border-top-left-radius: 3px;
            border-bottom-left-radius: 3px;
        }
        .btn-quantity-right{
            border-left: none;
            border-top-right-radius: 3px;
            border-bottom-right-radius: 3px;
        }
        .quantity-value{
            width: 30px;
            height: 30px;
            border: 1px solid #ccc;
        }
        .quantity-product-choice{
            margin-top: 4.5em;
        }
        .btn-order{
            width: 8em;
            padding: 0.5rem;
            background-color: #ff3945;
        }
        .form-quantity{
            padding-top: 1rem;

        }
        .description-product-1, .description-product-2{
            margin-left: 1rem;
            padding-left: 2rem;
            padding-top: 0.6rem;
            padding-bottom: 0.6rem;
        }
        .description-product-1{
            background-color: #f5f5f5;
        }
        .fields-product{
            padding: 1rem;
            font-size: 0.8rem;
            font-weight: 700;
        }
        .choose_category{
            color: #27ae60;
            font-size: 1.5rem;
        }
        .btn-addproduct{
            background-color: #27ae60 !important;
            margin-left: 1rem;
        }
        .title-product{
            font-weight: bold;
            font-size: 1.2rem;
            padding-left: 0.4rem;
            padding-top: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .name-product{
            font-size: 1rem;
            font-weight: bold;
            margin-left: 0.4rem;
            padding-top: 0.5rem;
        }
        .decription-product{
            padding-top: 0.5rem;
            font-size: 0.9rem;
            margin-left: 0.4rem;
        }
        .name-product-head{
            padding-bottom: 1rem;
        }
        .decription-product{
            min-height: 5rem !important;
        }
        .book-name-dot{
            text-overflow: ellipsis;
            overflow: hidden; 
            white-space: normal;
        }
        .book-name-dot-100{
            width: 100%;
            height: 2.4rem;
        }
        .book-name-dot-50{
            width: 25em;
            height: 1.5rem;
        }
        .Cart-title{
            margin-left: 5.5rem;
            padding-top: 3rem;
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        .Cart-icon{
            position: relative;
        }
        .announce{
            background-color: rgb(253 216 53);
            border-radius: 50%;
            position: absolute;
            right: -0.8em;
            top: -0.8em;
            padding: 0 .4rem;
            font-size: 0.8rem;
            color: #000000;
        }
        .cart-navbar-icon{
            font-size: 1.4em;
        }
        .cart-navbar{
            font-size: 0.8em;
            margin-top: 10px;
            margin-left: 10px;
        }
        .alert-position{
            position: absolute;
            top: 110px;
            right: 2px;
        }
        .btn-custom{
            border: none;
            padding: 3px;
        }
        .btn-custom:hover{
            cursor: pointer;
            opacity: 0.7;
        }
        .image-product-cart{
            width: 80%;
        }
        .name-product-cart{
            font-size: 0.8em;
            text-overflow: ellipsis;
            overflow: hidden;
            height: 2.5rem;
        }
        .price-product-cart{
            font-size: 0.8em;
            font-weight: bold;
        }
        .quantity-product-cart{
            height: 25px;
            width: 32px;
            font-size: 0.8em;
            border: 1px solid #ccc;
            background-color: #ffffff;
        }
        .quantity-cart-decrement, .quantity-cart-increase{
            height: 25px;
            width: 25px;
            border: 1px solid #ccc;
            position: relative;
            cursor: pointer;
        }
        .quantity-cart-decrement{
            border-right: none;
            border-top-left-radius: 3px;
            border-bottom-left-radius: 3px;
        }
        .quantity-cart-increase{
            border-left: none;
            border-top-right-radius: 3px;
            border-bottom-right-radius: 3px;
        }
        .minus-custom-quantity{
            position: absolute;
            top: 6px;
            left: 6px;
            font-size: 0.8em;
        }
        .plus-custom-quatity{
            position: absolute;
            top: 6px;
            left: 6px;
            font-size: 0.8em;
        }
        .total-price-cart{
            color:#ff424e;
            font-size: 0.8em;
            font-weight: 500;
        }
        .btn-buy{
            padding: 10px 0;
            color: white;
            background-color: #ff424e;
        }
        .btn-buy:hover{
            color: white;
            opacity: 0.95;
        }
        .total-price{
            color: #ff424e;
            font-size: 1.5em;
        }
    </style>
</head>
<body>
    {% include 'navbar.html' %}
    
    {% block content %}

    {% endblock %}

    {% include 'footer.html' %}


    <script>
        // Tăng giảm sóo lượng sản phẩm ở phần đặt hàng dùng jquery
        $(document).ready(function(){

            // Animation for out messages
            $(".btn-custom").click(function(){
                $("#alert").fadeOut("slow");
            });

            //decrement quantity of product for order  
            $("#decrement-quantity").click(function(){
                var quantity = parseInt($("#quantity").val());
                if(quantity<=0){
                    $("#quantity").val(0);
                }
                else{
                    $("#quantity").val(quantity - 1);
                }
            });

            //increase quantity of product for order  
            $("#increase-quantity").click(function(){
                var quantity = parseInt($("#quantity").val());
                $("#quantity").val(quantity + 1);
            });

        });      

         // Giảm giá trị của số lượng sản phẩm của order trong giỏ hàng
        function decrement(id){
            var id_quantity = 'quantity-product-cart-' + id;
            var id_price = 'price-product-cart-' + id;
            var id_total_price = 'total-price-cart-' + id;
            var delete_order = 'delete-' + id;

            var quantity = parseInt(document.getElementById(id_quantity).value);
            if(quantity -1 !=0){

                document.getElementById(id_quantity).value = quantity - 1; 
                var total_price  = (quantity-1) * parseInt(document.getElementById(id_price).textContent.trim().slice(0,-2).replaceAll(',',''));
                document.getElementById(id_total_price).innerHTML = total_price.toLocaleString() + ' đ';


                var total_price_all_cart = 0;
                var element_check_order = document.getElementsByName('checkbox_products[]');
                var total_price_of_each_order = document.getElementsByClassName('total-price-cart'); 
                for(var i =0; i<element_check_order.length; i++){
                    if(element_check_order[i].checked === true){
                        total_price_all_cart += parseInt( total_price_of_each_order[i].textContent.trim().slice(0,-2).replaceAll(',', ''));
                    }
                }
                document.getElementById('temp_total_price').innerHTML = total_price_all_cart.toLocaleString() + ' đ';
                document.getElementById('total_price_official').innerHTML = total_price_all_cart.toLocaleString() + ' đ';

            }   
            // nếu giá trị số lượng về 0 folow link xóa sản phẩm khỏi giỏ hàng
            else {
                if (confirm('Are you want to remove this order from your cart?'))
                {   
                    var url = document.getElementById(delete_order).getAttribute("href");
                    console.log(url);
                    window.location.href = url;
                }
                else
                {
                    event.stopPropagation(); event.preventDefault();
                };
            }
        }

        // Tăng giá trị của số lượng sản phẩm của order trong giỏ hàng
        function increase(id){
            var id_quantity = 'quantity-product-cart-' + id;
            var id_price = 'price-product-cart-' + id;
            var id_total_price = 'total-price-cart-' + id;
            var quantity = parseInt(document.getElementById(id_quantity).value);
            document.getElementById(id_quantity).value = quantity + 1;
            var total_price = (quantity + 1) * parseInt(document.getElementById(id_price).textContent.slice(0,-2).replaceAll(',',''));
            document.getElementById(id_total_price).innerHTML = total_price.toLocaleString() + ' đ';



            var total_price_all_cart = 0;
            var element_check_order = document.getElementsByName('checkbox_products[]');
            var total_price_of_each_order = document.getElementsByClassName('total-price-cart'); 
            for(var i =0; i<element_check_order.length; i++){
                if(element_check_order[i].checked === true){
                    total_price_all_cart += parseInt( total_price_of_each_order[i].textContent.trim().slice(0,-2).replaceAll(',', ''));
                }
            }
            document.getElementById('temp_total_price').innerHTML = total_price_all_cart.toLocaleString() + ' đ';
            document.getElementById('total_price_official').innerHTML = total_price_all_cart.toLocaleString() + ' đ';

        }

        // Tạo thứ tự cho danh sách sản phẩm trong mục quản lý sản phẩm
        function generation_sn_for_product(){
            var sn = document.getElementsByClassName('sn');
            for(var i=0; i<sn.length; i++){
                sn[i].innerHTML = i + 1;
            }
        }

        generation_sn_for_product();

        // đánh dấu tất cả check box và loại bỏ tất cả các check box và thay đổi giá trị liên quan
        function checkbox_order_cart_for_all(){
            var order_count = 0;
            var total_price_all_cart = 0;
            var element_check_order = document.getElementsByName('checkbox_products[]');
            var total_price_of_each_order = document.getElementsByClassName('total-price-cart'); 
            if(document.getElementById('all_checkbox').checked === true){
                for(var i=0; i<element_check_order.length; i++){
                    order_count +=1;
                    element_check_order[i].checked = true;
                    total_price_all_cart += parseInt( total_price_of_each_order[i].textContent.trim().slice(0,-2).replaceAll(',', ''));
                }
            }
            if(document.getElementById('all_checkbox').checked === false){
                for(var i =0; i<element_check_order.length; i++){
                    element_check_order[i].checked = false;
                }
            }
            document.getElementById('buy').value = 'Buy(' + order_count + ')';
            document.getElementById('temp_total_price').innerHTML = total_price_all_cart.toLocaleString() + ' đ';
            document.getElementById('total_price_official').innerHTML = total_price_all_cart.toLocaleString() + ' đ';
        }

        // đánh dấu từng check box và thay đổi các giá trị liên quan
        function check_order_cart(){
            var order_count = 0;
            var total_price_all_cart = 0;
            var element_check_order = document.getElementsByName('checkbox_products[]'); // lấy danh sách các check box
            var total_price_of_each_order = document.getElementsByClassName('total-price-cart'); // lấy danh sách các giá trị ở ô total price của từng order 
            var flag = false;
            for(var i =0; i<element_check_order.length; i++){
                if(element_check_order[i].checked === false){
                    document.getElementById('all_checkbox').checked = false; // ô check box all
                    flag = true;
                }
                else {
                    order_count +=1;
                    total_price_all_cart += parseInt( total_price_of_each_order[i].textContent.trim().slice(0,-2).replaceAll(',', ''));
                }
            }
            if(flag===false){
                document.getElementById('all_checkbox').checked = true;
            }
            document.getElementById('buy').value = 'Buy(' + order_count + ')';
            document.getElementById('temp_total_price').innerHTML = total_price_all_cart.toLocaleString() + ' đ'; // giá trị tạm tính
            document.getElementById('total_price_official').innerHTML = total_price_all_cart.toLocaleString() + ' đ'; // tổng giá trị
        }
        
    </script>
</body>
</html>