{% extends 'index.html' %}
{% load static %}
{% block content %}

<div class="container-fluid" style="background-color: #f5f5fa;">
    <div class="Cart-title">Cart</div>
       <div class="container d-flex justify-content-around">
            <div class="col-8">
                <div class="row text-center p-3 rounded bg-white mb-3" >
                    <div class="col-5 text-start">
                        All ({{cart.order.all.count}} products)
                    </div>
                    <div class="col-2">Price</div>
                    <div class="col-2">Amout</div>
                    <div class="col-2">Total</div>
                    <div class="col-1"><i class="fa-solid fa-trash-can"></i></div>
                </div>
                {% for order in cart.order.all %}
                <div class="row rounded bg-white text-center mb-3 p-3">
                    <div class="col-5">
                        <a href="{% url 'order-product' order.product.category.id order.product.id %}" class="d-flex text-dark">
                            <div class="col-5 text-start">
                                <div class="card image-product-cart">
                                    <img class="card-img-top" src="{{order.product.image.url}}" alt="">
                                </div>
                            </div>
                            <div class="col-7 name-product-cart text-start">
                                {{order.product.name}} 
                            </div>
                        </a>
                    </div>

                    <div class="col-2 price-product-cart" id="price-product-cart-{{order.id}}">
                        {{order.product.price}} đ
                    </div>

                    <div class="col-2 d-flex justify-content-center">
                        <span class="quantity-cart-decrement" id="{{order.id}}" onclick="decrement(this.id)"><i class="fa-solid fa-minus minus-custom-quantity"></i></span>
                        <input type="text" value="{{order.quantity}}" id="quantity-product-cart-{{order.id}}" class="quantity-product-cart" inputmode="numeric" disabled>
                        <span class="quantity-cart-increase" id="{{order.id}}" onclick="increase(this.id)"><i class="fa-solid fa-plus plus-custom-quatity"></i></span>
                    </div>

                    
                    <div class="col-2 total-price-cart" id="total-price-cart-{{order.id}}">
                        {{order.total_price}} đ
                    </div>

                    <div class="col-1"><a href="{% url 'delete-order' cart.id order.id %}" id="delete-{{order.id}}" class="text-dark"onclick="if (confirm('Are you want to remove this order from your cart?')){return true;}else{event.stopPropagation(); event.preventDefault();};" ><i class="fa-solid fa-trash-can"></i></a></i></div>

                </div>
                {% endfor %}
            </div>
            <div class="col-3">
                <div class="row p-3 rounded bg-white mb-3">
                    <div class="d-flex justify-content-between mb-3"> 
                        {% if address is not none %}
                        <div>Giao tới</div>
                        <div><a href="">Thay đổi</a></div>
                        {% else %}
                        <strong><a href="">Add address for delivery</strong></a>
                        {% endif %}
                    </div>
                    <div>
                        <div>
                            <strong> 
                            {{request.user.full_name}} | {{request.user.SDT}}
                            | <a href="">Update information</a>  
                            </strong>
                        </div>
                        <div>
                            {% if address is not none %}
                            {{address.exact_address}}, Phường/Xã {{address.ward}}, Quận/Huyện {{address.district}}, Tỉnh {{address.province}}, {{address.country}}
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> 
</div>

{% for message in messages %}
<div class="alert alert-success alert-position" role="alert" id="alert">
    {{message}}
    <span class="btn-custom"><i class="fa-solid fa-xmark"></i></span>
</div>
{% endfor %}

{% endblock %}